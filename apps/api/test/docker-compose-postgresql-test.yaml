services:
  postgres:
    container_name: postgres-test
    image: 'postgres:13.2'
    ports:
      - '5435:5432'
    networks:
      - app_test
    user: postgres
    environment:
      POSTGRES_USER: fondation
      POSTGRES_PASSWORD: secret
      POSTGRES_DB: fondation

  minio:
    container_name: minio-test
    image: 'minio/minio:latest'
    command: server /data
    ports:
      - '9000:9000' # API
    networks:
      - app_test
    environment:
      MINIO_ROOT_USER: fondation
      MINIO_ROOT_PASSWORD: fondation-secret
      MINIO_STORAGE_FREE_SPACE_THRESHOLD: 1GB
    volumes:
      - fondation_minio_test:/data

networks:
  app_test:
    driver: bridge
volumes:
  fondation_minio_test:
